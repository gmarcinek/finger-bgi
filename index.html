<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Half Crimp - Biomechanika</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }

        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        form {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        input[type="range"] {
            width: 100%;
        }

        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #2980b9;
        }

        #result {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .result-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .result-section:last-child {
            border-bottom: none;
        }

        .toggle-container {
            margin: 15px 0;
            display: flex;
            align-items: center;
        }

        .toggle-container label {
            margin: 0 0 0 10px;
            display: inline;
        }

        .risk-niskie {
            color: green;
            font-weight: bold;
        }

        .risk-umiarkowane {
            color: orange;
            font-weight: bold;
        }

        .risk-podwyższone {
            color: orangered;
            font-weight: bold;
        }

        .risk-wysokie {
            color: red;
            font-weight: bold;
        }

        .explainer {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9em;
        }

        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .options-column {
            flex: 1;
            min-width: 250px;
        }
    </style>
</head>

<body>
    <h1>Kalkulator Half Crimp - Biomechanika</h1>

    <div class="explainer">
        <h3>O kalkulatorze</h3>
        <p>Ten kalkulator analizuje biomechanikę half crimpu (półcrimpu) w oparciu o proporcje anatomiczne palców,
            masę ciała i poziom wytrenowania. Model uwzględnia mechanikę dźwigni, kąty zgięcia stawów, naprężenia
            w ścięgnach i szacuje maksymalną siłę chwytu oraz ryzyko kontuzji.</p>
    </div>

    <form id="gripForm">
        <div class="options-container">
            <div class="options-column">
                <h3>Parametry podstawowe</h3>

                <div class="form-group">
                    <label for="L_p2">Długość drugiego paliczka (LP2) [cm]:</label>
                    <input type="number" id="L_p2" name="L_p2" step="0.1" min="1.5" max="4.0" value="2.5" required>
                    <small>Typowy zakres: 2.0 - 3.0 cm</small>
                </div>

                <div class="form-group">
                    <label for="L_p3">Długość trzeciego paliczka (LP3) [cm]:</label>
                    <input type="number" id="L_p3" name="L_p3" step="0.1" min="1.0" max="3.0" value="1.8" required>
                    <small>Typowy zakres: 1.5 - 2.2 cm</small>
                </div>

                <div class="form-group">
                    <label for="C_joint">Obwód stawu DIP [cm]:</label>
                    <input type="number" id="C_joint" name="C_joint" step="0.1" min="4.0" max="8.0" value="5.5"
                        required>
                    <small>Typowy zakres: 4.5 - 7.0 cm</small>
                </div>

                <div class="form-group">
                    <label for="weight">Masa ciała [kg]:</label>
                    <input type="number" id="weight" name="weight" step="0.5" min="40" max="120" value="70" required>
                </div>
            </div>

            <div class="options-column">
                <div class="toggle-container">
                    <input type="checkbox" id="advancedToggle">
                    <label for="advancedToggle">Pokaż opcje zaawansowane</label>
                </div>

                <div id="advancedOptions" style="display: none;">
                    <h3>Parametry zaawansowane</h3>

                    <div class="form-group">
                        <label for="pipAngle">Kąt zgięcia stawu PIP (typowo 90° w half crimping) [°]:</label>
                        <input type="range" id="pipAngle" name="pipAngle" min="0" max="120" value="90">
                        <output id="pipAngleValue">90°</output>
                    </div>

                    <div class="form-group">
                        <label for="dipAngle">Kąt zgięcia stawu DIP [°]:</label>
                        <input type="range" id="dipAngle" name="dipAngle" min="0" max="90" value="0">
                        <output id="dipAngleValue">0°</output>
                    </div>

                    <div class="form-group">
                        <label for="trainingLevel">Poziom wytrenowania:</label>
                        <input type="range" id="trainingLevel" name="trainingLevel" min="1" max="5" value="1" step="1">
                        <output id="trainingLevelValue">1 - Nietrenujący</output>
                    </div>
                </div>
            </div>
        </div>

        <button type="submit">Analizuj</button>
    </form>

    <div id="result">
        <p>Wypełnij formularz powyżej i kliknij "Analizuj", aby zobaczyć wyniki.</p>
    </div>

    <script>
        // Skrypt do aktualizacji wyświetlanych wartości suwaków
        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("gripForm");
            const advancedToggle = document.getElementById("advancedToggle");
            const advancedOptions = document.getElementById("advancedOptions");

            // Obsługa przełącznika zaawansowanych opcji
            if (advancedToggle && advancedOptions) {
                advancedToggle.addEventListener("change", () => {
                    advancedOptions.style.display = advancedToggle.checked ? "block" : "none";
                });
            }

            form.addEventListener("submit", (e) => {
                e.preventDefault();

                // Pobranie podstawowych wartości z formularza
                const L_p2 = parseFloat(document.getElementById("L_p2").value);  // długość LP2 (cm)
                const L_p3 = parseFloat(document.getElementById("L_p3").value);  // długość LP3 (cm)
                const C_joint = parseFloat(document.getElementById("C_joint").value);  // obwód stawu DIP (cm)
                const weight = parseFloat(document.getElementById("weight").value);  // masa ciała (kg)

                // Pobranie zaawansowanych opcji (jeśli dostępne)
                let pipAngle = 90; // Domyślny kąt zgięcia PIP (stopnie)
                let dipAngle = 0;  // Domyślny kąt zgięcia DIP (stopnie)
                let trainingLevel = 1; // Domyślny poziom wytrenowania (1-5)

                // Sprawdzenie czy zaawansowane opcje są dostępne i pobieranie ich wartości
                if (document.getElementById("pipAngle")) {
                    pipAngle = parseFloat(document.getElementById("pipAngle").value);
                }
                if (document.getElementById("dipAngle")) {
                    dipAngle = parseFloat(document.getElementById("dipAngle").value);
                }
                if (document.getElementById("trainingLevel")) {
                    trainingLevel = parseFloat(document.getElementById("trainingLevel").value);
                }

                // Obliczenia podstawowe
                const L_lever = L_p2 + L_p3; // Całkowita długość dźwigni (cm)
                const BGI = (L_lever ** 2) / C_joint; // Biomechanical Grip Index

                // Obliczenie średnicy stawu na podstawie obwodu (zakładając kształt okręgu)
                const jointDiameter = C_joint / Math.PI;

                // Obliczenie przybliżonej powierzchni przekroju ścięgna (mm²)
                // Zakładamy, że powierzchnia przekroju ścięgna jest proporcjonalna do kwadratu średnicy stawu
                const tendonArea = Math.PI * ((jointDiameter * 2.5) ** 2); // Współczynnik 2.5 to przybliżenie

                // Konwersja kątów na radiany
                const pipRadians = pipAngle * Math.PI / 180;
                const dipRadians = dipAngle * Math.PI / 180;

                // Obliczenie efektywnej długości dźwigni uwzględniając kąty zgięcia
                // W half crimpie, PIP jest zgięty ~90°, a DIP może być lekko zgięty lub wyprostowany
                const effectiveL_p2 = L_p2 * Math.sin(pipRadians);
                const effectiveL_p3 = L_p3 * Math.sin(dipRadians);
                const effectiveLever = effectiveL_p2 + effectiveL_p3;

                // Obliczenie momentu siły działającego na staw PIP (Nm)
                // Zakładamy, że siła ciężkości działa na końcu palca
                const forceNewtons = weight * 9.81; // Konwersja kg na N
                const leverMeters = L_lever / 100; // Konwersja cm na m
                const moment = forceNewtons * leverMeters;

                // Obliczenie naprężenia w ścięgnie (MPa)
                // Zakładamy, że siła w ścięgnie jest proporcjonalna do momentu siły
                // i odwrotnie proporcjonalna do efektywnego ramienia dźwigni
                const tendonForce = moment / (effectiveLever / 100); // N
                const tendonStress = tendonForce / tendonArea; // N/mm² = MPa

                // Obliczenie współczynnika siły w oparciu o mechanikę dźwigni
                // Współczynnik k jest odwrotnie proporcjonalny do długości dźwigni
                // i proporcjonalny do obwodu stawu (który wpływa na przekrój ścięgna)
                const k = C_joint / L_lever;

                // Współczynniki dla różnych poziomów wytrenowania
                // Wartości bazują na literaturze dotyczącej siły chwytu wspinaczy
                const trainingFactors = {
                    untrained: 0.6,  // Osoba nietrenująca
                    beginner: 0.9,   // Początkujący wspinacz (< 1 rok)
                    intermediate: 1.2, // Średnio zaawansowany (1-3 lata)
                    advanced: 1.6,   // Zaawansowany (3-5 lat)
                    elite: 2.0       // Elitarny wspinacz (> 5 lat)
                };

                // Wybór współczynnika treningu na podstawie poziomu treningowego
                let trainingFactor;
                if (trainingLevel <= 1) trainingFactor = trainingFactors.untrained;
                else if (trainingLevel <= 2) trainingFactor = trainingFactors.beginner;
                else if (trainingLevel <= 3) trainingFactor = trainingFactors.intermediate;
                else if (trainingLevel <= 4) trainingFactor = trainingFactors.advanced;
                else trainingFactor = trainingFactors.elite;

                // Obliczenie maksymalnej siły chwytu w kg
                // Zakładamy, że maksymalna siła jest proporcjonalna do wagi ciała, 
                // współczynnika k i poziomu wytrenowania
                const maxGripForce = weight * k * trainingFactor;

                // Obliczenie obciążenia stawów PIP i DIP
                const pipJointLoad = tendonForce * 0.85; // 85% siły ścięgna
                const dipJointLoad = tendonForce * 0.65; // 65% siły ścięgna

                // Obliczenie ryzyka kontuzji
                // Ryzyko rośnie wraz ze wzrostem naprężenia w ścięgnie i maleje z treningiem
                const injuryRiskFactor = tendonStress / (trainingFactor * 10);
                let injuryRisk;

                if (injuryRiskFactor < 0.5) injuryRisk = "Niskie";
                else if (injuryRiskFactor < 1.0) injuryRisk = "Umiarkowane";
                else if (injuryRiskFactor < 1.5) injuryRisk = "Podwyższone";
                else injuryRisk = "Wysokie";

                // Wyświetlanie wyników na stronie
                const resultDiv = document.getElementById("result");
                resultDiv.innerHTML = `
      <h3>Wyniki analizy half crimpu</h3>
      
      <div class="result-section">
        <h4>Podstawowe parametry</h4>
        <p><strong>BGI (Biomechanical Grip Index):</strong> ${BGI.toFixed(2)}</p>
        <p><strong>Współczynnik siły (k):</strong> ${k.toFixed(4)}</p>
        <p><strong>Całkowita długość dźwigni:</strong> ${L_lever.toFixed(1)} cm</p>
        <p><strong>Efektywna długość dźwigni:</strong> ${effectiveLever.toFixed(1)} cm</p>
      </div>
      
      <div class="result-section">
        <h4>Parametry biomechaniczne</h4>
        <p><strong>Przybliżona powierzchnia przekroju ścięgna:</strong> ${tendonArea.toFixed(1)} mm²</p>
        <p><strong>Moment siły działający na palce:</strong> ${moment.toFixed(1)} Nm</p>
        <p><strong>Siła działająca na ścięgno:</strong> ${tendonForce.toFixed(1)} N</p>
        <p><strong>Naprężenie w ścięgnie:</strong> ${tendonStress.toFixed(1)} MPa</p>
      </div>
      
      <div class="result-section">
        <h4>Obciążenie stawów</h4>
        <p><strong>Obciążenie stawu PIP:</strong> ${pipJointLoad.toFixed(1)} N</p>
        <p><strong>Obciążenie stawu DIP:</strong> ${dipJointLoad.toFixed(1)} N</p>
      </div>
      
      <div class="result-section">
        <h4>Szacowana maksymalna siła chwytu (halfcrimp)</h4>
        <p><strong>Przy obecnym poziomie treningu:</strong> ${maxGripForce.toFixed(1)} kg</p>
        <p><strong>Szacowane ryzyko kontuzji:</strong> <span class="risk-${injuryRisk.toLowerCase()}">${injuryRisk}</span></p>
      </div>
      
      <div class="result-section">
        <h4>Porównanie z różnymi poziomami treningowymi</h4>
        <ul>
          <li><strong>Nietrenujący:</strong> ${(weight * k * trainingFactors.untrained).toFixed(1)} kg</li>
          <li><strong>Początkujący:</strong> ${(weight * k * trainingFactors.beginner).toFixed(1)} kg</li>
          <li><strong>Średniozaawansowany:</strong> ${(weight * k * trainingFactors.intermediate).toFixed(1)} kg</li>
          <li><strong>Zaawansowany:</strong> ${(weight * k * trainingFactors.advanced).toFixed(1)} kg</li>
          <li><strong>Elitarny:</strong> ${(weight * k * trainingFactors.elite).toFixed(1)} kg</li>
        </ul>
      </div>
    `;
            });
        });
    </script>

    <!-- MIEJSCE NA GŁÓWNY SKRYPT KALKULATORA -->
    <!-- Tutaj wklej cały kod JavaScript z artefaktu "improved-grip-model" -->

</body>

</html>